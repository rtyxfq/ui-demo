// packages/ui/src/components/Button/index.module.scss

@use "sass:color"; // å¯¼å…¥é¢œè‰²æ¨¡å—ï¼Œä½¿ç”¨å‘½åç©ºé—´ color.
@use "../../styles/theme.scss" as theme; // ä½¿ç”¨ @use å¼•å…¥ä¸»é¢˜ï¼Œå¹¶å‘½åä¸º 'theme'

// 1. ä½¿ç”¨ SCSS å˜é‡å’ŒåµŒå¥—
// $primary-color: #007bff;
$primary-color: theme.$global-primary-color;
$border-radius: theme.$global-spacing-unit;

// 2. å®šä¹‰ä¸€ä¸ª SCSS æ··å…¥ (Mixin)ï¼Œæ–¹ä¾¿å¤ç”¨ï¼ŒåºŸå¼ƒï¼Œä½¿ç”¨é£æ ¼å…¨å±€å¸¸é‡ã€âŒã€‘
// @mixin disabled-style {
//   opacity: 0.6;
//   cursor: not-allowed;
// }

// å®šä¹‰æŒ‰é’®æ··åˆæ–¹æ³•
@mixin button-variant($bg-color, $text-color){
  background-color: $bg-color;
  color: $text-color;
  // è‡ªåŠ¨è®¡ç®—hove é¢œè‰²ï¼šå°†èƒŒæ™¯è‰²ç¨å¾®è°ƒæš— 10%
  &:hover{
    background-color: color.adjust($bg-color, $lightness: -10%)
  }

  &:hover {
    background-color: color.adjust($bg-color, $lightness: -10%);
    color: $text-color; // å¼ºåˆ¶è®¾ç½®æ–‡æœ¬é¢œè‰²ï¼Œé˜²æ­¢è¢« VitePress è¦†ç›–
  }
}

// 3. ä½¿ç”¨ CSS Modules çš„ç±»å
.button {
  background-color: $primary-color;
  color: theme.$global-primary-text;
  padding: theme.$global-spacing-unit * 1 theme.$global-spacing-unit * 2;
  border: none;
  border-radius: $border-radius;
  cursor: pointer;
  // é»˜è®¤æ ·å¼ï¼šå¤–å‡¸é˜´å½± (Skeuomorphism default state: outer convex shadow)
  box-shadow:
      9px 9px 16px theme.$global-dark-shadow,  /* åº•éƒ¨å³ä¾§æ·±é˜´å½± */
      -9px -9px 16px theme.$global-light-source; /* é¡¶éƒ¨å·¦ä¾§äº®é«˜å…‰ */

  transition: all 0.2s ease;
  font-weight: 400;

  // 4. ä½¿ç”¨ SCSS åµŒå¥—æ¥å¤„ç† hover çŠ¶æ€
  &:hover {
    // background-color: darken($primary-color, 10%);
    background-color: color.adjust($primary-color, $lightness: -10%);
    // background-color: adjust-color($primary-color, $lightness: -10%);
  }
}

// æ‹Ÿç‰©åŒ–äº¤äº’çŠ¶æ€ï¼šæŒ‰ä¸‹æ—¶ (The pressed state: inner concave shadow)
.button:active,
.button.pressed {
  // æ¨¡æ‹Ÿç‰©ç†ä¸‹é™·ï¼Œå°†é˜´å½±åè½¬ä¸ºå†…å‡¹ (inset)
  box-shadow:
    inset 5px 5px 10px theme.$global-dark-shadow, /* å†…å‡¹æ·±é˜´å½± */
    inset -5px -5px 10px theme.$global-light-source; /* å†…å‡¹äº®é«˜å…‰ */
}

.disabled {
  // @include disabled-style;
  @include theme.global-disabled-style;

  // è¦†ç›–æ‹Ÿç‰©åŒ–äº¤äº’ï¼Œç¡®ä¿ç¦ç”¨æ—¶æ— å†…å‡¹é˜´å½±
  &:active,
  &.pressed {
    // ç¦ç”¨æ—¶åªæ˜¾ç¤ºé»˜è®¤çš„å¤–å‡¸é˜´å½±
      box-shadow: 
          9px 9px 16px theme.$global-dark-shadow,  
          -9px -9px 16px theme.$global-light-source;
  }
}

// typeç›¸å…³
// æ™®é€šæ“ä½œï¼Œä¼˜å…ˆçº§æœ€ä½ï¼Œç”¨äºæ¬¡è¦åŠ¨ä½œæˆ–å–æ¶ˆã€‚
.default{
  @include button-variant(theme.$global-primary-color, theme.$global-primary-text);
}
// ä¸»è¦æ“ä½œï¼Œæœ€é«˜ä¼˜å…ˆçº§ï¼Œé©±åŠ¨ç”¨æˆ·å®Œæˆä¸»è¦ç›®æ ‡ã€‚
.primary{
  @include button-variant(theme.$global-primary-color, theme.$global-primary-text);
}
.success{
  @include button-variant(theme.$global-success-color, theme.$global-primary-text);
}
.danger{
  @include button-variant(theme.$global-danger-color, theme.$global-primary-text);
}
.warning{
  @include button-variant(theme.$global-warning-color, theme.$global-primary-text);
}
.text{
  // æ–‡æœ¬æŒ‰é’®ä¸éœ€è¦èƒŒæ™¯å’Œé˜´å½±ï¼Œä»…åœ¨ hover æ—¶æœ‰é¢œè‰²å˜åŒ–
    background-color: transparent;
    color: theme.$global-primary-color; // æ–‡æœ¬é¢œè‰²ä½¿ç”¨ä¸»é¢˜è‰²

    // è¦†ç›–åŸºç¡€çš„ box-shadow (å› ä¸º text æŒ‰é’®ä¸éœ€è¦é»˜è®¤é˜´å½±)
    box-shadow: none;

    // æ–‡æœ¬æŒ‰é’®çš„ hover æ•ˆæœé€šå¸¸æ˜¯æ–‡æœ¬å˜è‰²æˆ–èƒŒæ™¯å˜æµ…
    &:hover {
        background-color: color.adjust(theme.$global-primary-color, $alpha: -0.9); // éå¸¸æµ…çš„ä¸»é¢˜è‰²èƒŒæ™¯
        color: theme.$global-primary-color;
    }

    // ğŸš¨ Text æŒ‰é’®çš„ Pressed çŠ¶æ€ï¼šæ¨¡æ‹Ÿæ–‡æœ¬ä¸‹æ²‰
    &.pressed {
        // å¯ä»¥è®©æ–‡æœ¬é¢œè‰²å˜æ·±ï¼Œæˆ–è€…æ·»åŠ ä¸€ä¸ªè½»å¾®çš„ inset é˜´å½±
        box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
    }
}
.link,
a.link {
  // åŸºç¡€æ ·å¼ï¼š
  text-decoration: none; // ç§»é™¤é“¾æ¥ä¸‹åˆ’çº¿
  // å¦‚æœéœ€è¦ï¼Œå¯ä»¥è¦†ç›–é“¾æ¥çš„é»˜è®¤è¾¹è·
  display: inline-flex; // è®©é“¾æ¥åƒæŒ‰é’®ä¸€æ ·å¸ƒå±€
  font-weight: theme.$global-font-weight;
  font-size: theme.$global-font-size;
  @include button-variant(theme.$global-primary-color, theme.$global-primary-text);
}
// å°ºå¯¸ç›¸å…³
.mini {
  // å°ºå¯¸æœ€å°
  padding: theme.$global-spacing-unit * 0.25 theme.$global-spacing-unit * 1;
  font-size: theme.$global-font-size * 0.85; 
  // ğŸš¨ ç§»é™¤ @include button-variant(...)
}

.small {
  padding: theme.$global-spacing-unit * 0.5 theme.$global-spacing-unit * 1.5;
  font-size: theme.$global-font-size * 0.9;
}

.medium { // ğŸš¨ ä¿®æ­£æ‹¼å†™ï¼šmedium
  padding: theme.$global-spacing-unit * 1 theme.$global-spacing-unit * 2;
  font-size: theme.$global-font-size; // æˆ–ç•¥å¾®å¢å¤§
}

.large {
  padding: theme.$global-spacing-unit * 1.5 theme.$global-spacing-unit * 3;
  font-size: theme.$global-font-size * 1.1;
}